(this["webpackJsonp04-redux"]=this["webpackJsonp04-redux"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","role":"admin","timestamp":1627934490151},{"id":2,"username":"test-user","role":"user","timestamp":1627934784096}]')},36:function(e){e.exports=JSON.parse('["user","super-user","admin"]')},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r,c,a=n(26),s=n.n(a),i=n(5),u="view",o="create",l="edit",d=n(8),j=n(10),b=n(0),p=function(e){Object(b.useEffect)(e,[])},f=n(2),O=n.n(f),h=n(6),x="FETCH_USERS_SUCCESS",v="FETCH_USER_SUCCESS",m="CREATE_USER_SUCCESS",w="EDIT_USER_SUCCESS",y="FETCH_ROLES_SUCCESS",g="INCREMENT_REQUESTS_COUNT",C="DECREMENT_REQUESTS_COUNT",k="DEPOSIT",S="WITHDRAW",E=function(){return{type:g}},U=function(){return{type:C}},T=n(4),N=n(23),R=n(21),F=n(18),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){setTimeout(t,e)}))},D=function(){return Date.now()},L=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},A=function(e,t){var n=Object(F.a)(t,1)[0];return Object.keys(e).filter((function(e){return!n.includes(e)})).reduce((function(t,n){return Object(T.a)(Object(T.a)({},t),{},Object(R.a)({},n,e[n]))}),{})},I=n(15),$=(r=I.length,function(){return++r}),H={getUsers:function(){return Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(2e3);case 2:return e.abrupt("return",Object(N.a)(I));case 3:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(h.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:if(!(n=I.find((function(t){return t.id===e})))){t.next=7;break}return t.abrupt("return",n);case 7:L(e);case 8:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(h.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:return n=Object(T.a)(Object(T.a)({id:$()},A(e,["id","timestamp"])),{},{timestamp:D()}),I.push(n),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(h.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:if(!~(n=I.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return I[n]=Object(T.a)(Object(T.a)({},e),{},{timestamp:D()}),t.abrupt("return",I[n]);case 8:L(e.id);case 9:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(h.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:if(!~(n=I.findIndex((function(t){return t===e.id})))){t.next=7;break}return t.abrupt("return",I.splice(n,1));case 7:L(e.id);case 8:case"end":return t.stop()}}),t)})))()}},J=function(e){return function(){var t=Object(h.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(E()),t.next=4,H.createUser(e);case 4:r=t.sent,n({type:m,payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),window.alert("Failed to create user: ".concat(t.t0.message));case 11:return t.prev=11,n(U()),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},M=function(e){return function(){var t=Object(h.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(E()),t.next=4,H.editUser(e);case 4:r=t.sent,n({type:w,payload:r}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),window.alert("Failed to edit user: ".concat(t.t0.message));case 12:return t.prev=12,n(U()),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},P="username",V="role",W=(c={},Object(R.a)(c,P,""),Object(R.a)(c,V,""),c),B=n(1);var q=function(e){var t=e.id,n=Object(i.i)().url,r=Object(i.g)(),c=function(e){return function(){r.push("".concat(n,"/user/").concat(e,"/").concat(t))}};return Object(B.jsxs)("div",{className:"Actions",children:[Object(B.jsx)("button",{onClick:c(u),children:"View"})," ",Object(B.jsx)("button",{onClick:c(l),children:"Edit"})]})};n(51);var Q=function(){var e=Object(i.i)().url,t=Object(j.b)(),n=Object(j.c)((function(e){return e.users}));return p((function(){n.isFetched||t(function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(E()),e.next=4,H.getUsers();case 4:n=e.sent,t({type:x,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),window.alert("Failed to fetch users: ".concat(e.t0.message));case 11:return e.prev=11,t(U()),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}())})),Object(B.jsxs)("div",{className:"UsersTable",children:[Object(B.jsx)(d.b,{to:"".concat(e,"/user/").concat(o),children:"Create User"}),Object(B.jsxs)("table",{children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"ID"}),Object(B.jsx)("th",{children:"Username"}),Object(B.jsx)("th",{children:"Role"}),Object(B.jsx)("th",{children:"Last Updated At"}),Object(B.jsx)("th",{children:"Actions"})]})}),Object(B.jsx)("tbody",{children:n.list.map((function(e){return Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{children:e.id}),Object(B.jsx)("td",{children:e.username}),Object(B.jsx)("td",{children:e.role}),Object(B.jsx)("td",{children:e.timestamp}),Object(B.jsx)("td",{children:Object(B.jsx)(q,{id:e.id})})]},e.id)}))})]})]})},X=n(36),Y={getRoles:function(){return Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(500);case 2:return e.abrupt("return",X);case 3:case"end":return e.stop()}}),e)})))()}},z=n(20);n(52);var G=function(e){var t=e.name,n=e.label,r=(e.required,e.validate,e.type),c=void 0===r?"text":r,a=e.disabled,s=void 0!==a&&a,i=Object(z.d)({name:t,validate:function(e){}}),u=Object(F.a)(i,1)[0];return Object(B.jsxs)("div",{className:"Input",children:[Object(B.jsxs)("label",{children:[Object(B.jsx)("div",{children:n}),Object(B.jsx)("input",Object(T.a)({type:c,disabled:s},u))]}),Object(B.jsx)(z.a,{name:t,className:"error",component:"div"})]})};var K=function(e){var t=e.mode,n=Object(i.g)(),r=Object(z.e)().isSubmitting;return Object(B.jsxs)("div",{children:[(t===o||t===l)&&Object(B.jsx)("button",{type:"submit",disabled:r,children:"Save"}),Object(B.jsx)("button",{type:"button",onClick:function(){return n.push("/users")},children:"Cancel"})]})};var Z=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode,c=e.roles;return Object(B.jsx)(z.c,{initialValues:t,onSubmit:n,children:Object(B.jsxs)(z.b,{children:[Object(B.jsx)(G,{name:P,label:"Username",disabled:r===u}),Object(B.jsx)(G,{name:V,label:"Role",disabled:r===u,validate:function(e){if(!c.list.includes(e))return"Allowed roles: ".concat(c.list.join(", "))}}),Object(B.jsx)("br",{}),Object(B.jsx)(K,{mode:r})]})})};var ee=function(){var e=Object(i.h)(),t=e.mode,n=e.id,r=Object(i.g)(),c=Object(j.b)(),a=Object(j.c)((function(e){return e.users})),s=Object(j.c)((function(e){return e.roles})),d=a.list.find((function(e){return e.id===Number(n)}));p((function(){t!==u&&t!==l||d||c(function(e){return function(){var t=Object(h.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(E()),t.next=4,H.getUser(e);case 4:r=t.sent,n({type:v,payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),window.alert("Failed to fetch user: ".concat(t.t0.message));case 11:return t.prev=11,n(U()),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}(Number(n))),s.isFetched||c(function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(E()),e.next=4,Y.getRoles();case 4:n=e.sent,t({type:y,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),window.alert("Failed to fetch roles: ".concat(e.t0.message));case 11:return e.prev=11,t(U()),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}())}));var b=function(){var e=Object(h.a)(O.a.mark((function e(n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=n,e.t0=t,e.next=e.t0===o?5:e.t0===l?8:11;break;case 5:return e.next=7,c(J(a));case 7:return e.abrupt("break",12);case 8:return e.next=10,c(M(a));case 10:return e.abrupt("break",12);case 11:console.error("Failed to execute this request for ".concat(t," mode"));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),window.alert(e.t1.message);case 17:r.push("/users");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e){return e||W}(d);return Object(B.jsx)(Z,{initialValues:f,onSubmit:b,mode:t,roles:s},"".concat(t,":").concat(f.id))};var te=function(){var e=Object(i.i)().path;return Object(B.jsx)("div",{className:"App",children:Object(B.jsxs)(i.d,{children:[Object(B.jsx)(i.b,{exact:!0,path:e,children:Object(B.jsx)(Q,{})}),Object(B.jsx)(i.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(u,"|").concat(o,"|").concat(l,")/:id?"),children:Object(B.jsx)(ee,{})})]})})},ne=n.p+"static/media/logo.6ce24c58.svg";n(53);var re=function(){return 0===Object(j.c)((function(e){return e.loading}))?null:Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{className:"Loading",children:Object(B.jsx)("img",{src:ne,className:"logo",alt:"logo"})}),Object(B.jsx)("div",{className:"overlay"})]})};n(54);var ce=function(){return Object(B.jsx)("div",{className:"SideBar",children:Object(B.jsxs)("ul",{children:[Object(B.jsx)("li",{children:Object(B.jsx)(d.c,{to:"/users",activeClassName:"bold",children:"Users"})}),Object(B.jsx)("li",{children:Object(B.jsx)(d.c,{to:"/counter",activeClassName:"bold",children:"Counter"})}),Object(B.jsx)("li",{children:Object(B.jsx)(d.c,{to:"/todo-list",activeClassName:"bold",children:"Todo List"})}),Object(B.jsx)("li",{children:Object(B.jsx)(d.c,{to:"/atm",activeClassName:"bold",children:"ATM"})})]})})},ae=Object(b.createContext)([0,function(e){}]);var se=function(e){var t=e.children,n=Object(b.useState)(0);return Object(B.jsx)(ae.Provider,{value:n,children:t})};var ie=function(){var e=Object(b.useContext)(ae),t=Object(F.a)(e,2),n=t[0],r=t[1];return Object(B.jsxs)("div",{children:[Object(B.jsxs)("p",{children:["You clicked ",n," times"]}),Object(B.jsx)("button",{onClick:function(){r((function(e){return e+1}))},children:"Click me"})]})},ue=function(e,t){var n=e.todoList,r=t.type,c=t.payload;switch(r){case"setTitle":return Object(T.a)(Object(T.a)({},e),{},{title:c});case"addTodo":return{title:"",todoList:[].concat(Object(N.a)(n),[c])};case"toggleTodo":return Object(T.a)(Object(T.a)({},e),{},{todoList:n.map((function(e){return e.id===c?Object(T.a)(Object(T.a)({},e),{},{isCompleted:!e.isCompleted}):e}))});case"deleteTodo":return Object(T.a)(Object(T.a)({},e),{},{todoList:n.filter((function(e){return e.id!==c}))});default:throw new Error('Type "'.concat(r,'" is not defined'))}},oe={title:"",todoList:[]},le=Object(b.createContext)(null);var de=function(e){var t=e.children,n=Object(b.useReducer)(ue,oe);return Object(B.jsx)(le.Provider,{value:n,children:t})};n(55);var je=function(){var e=Object(b.useContext)(le),t=Object(F.a)(e,2),n=t[0],r=t[1],c=n.title,a=n.todoList;return Object(B.jsxs)("div",{className:"TodoList",children:[Object(B.jsx)("form",{onSubmit:function(e){e.preventDefault(),c.trim()&&r(function(e){return{type:"addTodo",payload:{id:Date.now(),title:e.trim(),isCompleted:!1}}}(c))},children:Object(B.jsx)("input",{type:"text",value:c,onChange:function(e){return r(function(e){return{type:"setTitle",payload:e}}(e.target.value))}})}),Object(B.jsx)("ul",{children:a.map((function(e){var t=e.id,n=e.title,c=e.isCompleted;return Object(B.jsxs)("li",{onClick:function(){return r(function(e){return{type:"toggleTodo",payload:e}}(t))},children:[Object(B.jsx)("span",{style:{textDecoration:c?"line-through":"auto"},children:n}),Object(B.jsx)("button",{type:"button",onClick:function(){return r(function(e){return{type:"deleteTodo",payload:e}}(t))},children:"X"})]},t)}))})]})},be=function(e){return{type:k,payload:e}},pe=function(e){return{type:S,payload:e}},fe=function(){var e=Object(h.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(2e3);case 2:if(r=t(),!(r.atm>=n)){e.next=8;break}return e.abrupt("return",!0);case 8:throw new Error("Not enough money in the account");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var Oe=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.atm})),n=10;return Object(B.jsxs)("div",{className:"Atm",children:[Object(B.jsxs)("div",{children:[Object(B.jsxs)("button",{onClick:function(){e(be(10))},children:["Deposit $",10]})," ",Object(B.jsxs)("button",{disabled:t<n,onClick:function(){e(pe(n))},children:["Withdraw $",n]})]}),Object(B.jsx)("br",{}),Object(B.jsxs)("div",{children:[Object(B.jsxs)("button",{onClick:function(){var t;e((t=10,function(){var e=Object(h.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:n(be(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:["Deposit async $",10]})," ",Object(B.jsxs)("button",{disabled:t<n,onClick:function(){var t;e((t=n,function(){var e=Object(h.a)(O.a.mark((function e(n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe(r,t);case 3:n(pe(t)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()))},children:["Withdraw async $",n]})]}),Object(B.jsx)("br",{}),Object(B.jsxs)("span",{children:["Balance: ",t,"$"]})]})};var he=function(){return Object(B.jsxs)("div",{className:"App",children:[Object(B.jsx)(ce,{}),Object(B.jsx)("main",{children:Object(B.jsxs)(i.d,{children:[Object(B.jsx)(i.a,{exact:!0,from:"/",to:"/users"}),Object(B.jsx)(i.b,{path:"/users",children:Object(B.jsx)(te,{})}),Object(B.jsx)(i.b,{path:"/counter",children:Object(B.jsx)(ie,{})}),Object(B.jsx)(i.b,{path:"/todo-list",children:Object(B.jsx)(je,{})}),Object(B.jsx)(i.b,{path:"/atm",children:Object(B.jsx)(Oe,{})})]})}),Object(B.jsx)(re,{})]})},xe=n(25),ve=n(39),me=n(40),we=(n(56),{list:[],isFetched:!1}),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case x:return Object(T.a)(Object(T.a)({},e),{},{list:r,isFetched:!0});case v:return Object(T.a)(Object(T.a)({},e),{},{list:e.isFetched?e.list:[r]});case m:return Object(T.a)(Object(T.a)({},e),{},{list:[].concat(Object(N.a)(e.list),[r])});case w:return Object(T.a)(Object(T.a)({},e),{},{list:e.list.map((function(e){return e.id===r.id?r:e}))});default:return e}},ge={list:[],isFetched:!1},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case y:return{list:r,isFetched:!0};default:return e}},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case g:return e+1;case C:return e-1;default:return e}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case k:return e+r;case S:return e-r;default:return e}},Ee=Object(xe.b)({users:ye,roles:Ce,loading:ke,atm:Se}),Ue=Object(me.createLogger)({collapsed:!0}),Te=[ve.a,Ue],Ne=Object(xe.c)(Ee,{},xe.a.apply(void 0,Te));var Re=function(e){var t=e.children;return Object(B.jsx)(b.StrictMode,{children:Object(B.jsx)(j.a,{store:Ne,children:Object(B.jsx)(se,{children:Object(B.jsx)(de,{children:Object(B.jsx)(d.a,{basename:"/globallogic-js-basecamp-2021/react/04-redux/build",children:t})})})})})},Fe=(n(61),document.getElementById("root"));s.a.render(Object(B.jsx)(Re,{children:Object(B.jsx)(he,{})}),Fe)}},[[62,1,2]]]);
//# sourceMappingURL=main.73377811.chunk.js.map